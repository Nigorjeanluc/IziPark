{
  "swagger": "2.0",
  "info": {
    "description": "Izipark is application that Make parking place predictable and easy control of parking places",
    "version": " ",
    "title": "Izipark",
    "termsOfService": "https://github.com/Stackup-Rwanda/ateam-bn-backend/blob/develop/README.md",
    "contact": { "email": "nigorjeanluc@gmail.com" }
  },

  "host": "localhost:4001",
  "basePath": "/api",
  "tags": [
    {
      "name": "Admin login endpoint",
      "description": "Access to login API endpoints"
    },
    {
      "name": "Access to add a device",
      "description": "Admin can add a device to a certain place"
    },
    {
      "name": "Device login endpoint",
      "description": "Access to device login API endpoints"
    },
    {
      "name": "Device report entry endpoint",
      "description": "Access for the device to report an entry API endpoints"
    },
    {
      "name": "Device report exit endpoint",
      "description": "Access for the device to report an exit API endpoints"
    }
  ],
  "paths": {
    "/admin/login/": {
      "post": {
        "tags": ["Admin login endpoint"],
        "summary": "Admin login",
        "description": "Admin login endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Admin's credentials to be used for login",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AdminLogin"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Welcome Admin, you are successfully logged in as Admin"
          },
          "400": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "You are not allowed"
          }
        }
      }
    },
    "/admin/device/": {
      "post": {
        "tags": ["Access to add a device"],
        "summary": "Admin can add a device",
        "description": "Admin can add a device endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "description": "Admin's token"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Device's information to be filled",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AdminDevice"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "The device was successfully added to a certain place"
          },
          "400": {
            "description": "Invalid credentials"
          },
          "401": {
            "description": "The device already exists"
          }
        }
      }
    },
    "/admin/place/": {
      "post": {
        "tags": ["Access to add a parking place"],
        "summary": "Admin can add a parking place",
        "description": "Admin can add a place endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "description": "Admin's token"
          },
          {
            "in": "body",
            "name": "body",
            "description": "The parking place's information to be filled",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AdminPlace"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "The place was successfully added"
          },
          "400": {
            "description": "Invalid credentials"
          },
          "401": {
            "description": "The place already exists"
          }
        }
      }
    },
    "/device/login/": {
      "post": {
        "tags": ["Device login endpoint"],
        "summary": "Device login",
        "description": "Device login endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Device's credentials to be used for login",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeviceLogin"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Access granted for the device with ID: "
          },
          "400": {
            "description": "Invalid credentials"
          },
          "403": {
            "description": "This device is not allowed"
          }
        }
      }
    },
    "/device/entry/": {
      "post": {
        "tags": ["Device report entry endpoint"],
        "summary": "Device entry",
        "description": "Device entry endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "description": "Device's token"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Entry report from the device at the entry gate of the parking place",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeviceEntry"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "You have entered the parking at certain time"
          },
          "400": {
            "description": "Invalid credentials"
          },
          "401": {
            "description": "You card ID already entered the parking"
          }
        }
      }
    },
    "/device/exit/": {
      "post": {
        "tags": ["Device report exit endpoint"],
        "summary": "Device exit",
        "description": "Device exit endpoint",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "description": "Device's token"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Exit report from the device at the exit gate of the parking place",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeviceExit"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "You have exited the parking at certain time"
          },
          "400": {
            "description": "Invalid credentials"
          },
          "401": {
            "description": "You card ID already exited the parking"
          }
        }
      }
    }
  },
  "definitions": {
    "AdminLogin": {
      "type": "object",
      "required": [
        "email",
        "password"
      ],
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    },
    "AdminDevice": {
      "type": "object",
      "required": [
        "model",
        "device_id",
        "placeId",
        "description"
      ],
      "properties": {
        "model": {
          "type": "string"
        },
        "device_id": {
          "type": "string"
        },
        "placeId": {
          "type": "integer"
        },
        "description": {
          "type": "string"
        }
      }
    },
    "AdminPlace": {
      "type": "object",
      "required": [
        "placeName",
        "manager",
        "email",
        "image",
        "password",
        "phoneNumber"
      ],
      "properties": {
        "placeName": {
          "type": "string"
        },
        "manager": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "image": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "phoneNumber": {
          "type": "string"
        }
      }
    },
    "DeviceLogin": {
      "type": "object",
      "required": [
        "device_id"
      ],
      "properties": {
        "device_id": {
          "type": "string"
        }
      }
    },
    "DeviceEntry": {
      "type": "object",
      "required": [
        "cardId"
      ],
      "properties": {
        "cardId": {
          "type": "string"
        }
      }
    },
    "DeviceExit": {
      "type": "object",
      "required": [
        "cardId"
      ],
      "properties": {
        "cardId": {
          "type": "string"
        }
      }
    }
  },
  "schemes": ["http", "https"],
  "consumes": ["application/json", "none"],
  "produces": ["application/json", "none"]
}
